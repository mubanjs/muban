import{r as p,o,c as i,b as s,d as t,F as l,a as e,e as n}from"./app.7a437beb.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";const r={},u=e(`<h1 id="template" tabindex="-1"><a class="header-anchor" href="#template" aria-hidden="true">#</a> Template</h1><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The current template implementation might still change. <code>lit-html</code> has been replaced by <code>htm</code> + <code>vhtml</code> combo to allow more flexibility and a simpler setup, but since it&#39;s more focussed on (p)react compatibility, it requires a bit more effort to use raw HTML rendering.</p></div><p>Templates in Muban mostly serves a role during development, since the whole reason Muban exists is to make components for HTML rendered on the server. But to help local development to become easier, and not require waiting on complex server integrations before development can start, it plays an important role in the daily use of Muban.</p><p>The two small use cases it has for production are:</p><ol><li><p>For dynamic templates that have to be rendered from JavaScript, after receiving JSON data from an API, or complex local interaction is needed.</p></li><li><p>Although not built or marketed as such, with Muban it&#39;s possible to statically generate pages based on mock data and its templates. This is mostly used to generate static preview builds to showcase full pages for testing and sign-of, but can be used in production with some additional care.</p></li></ol><h2 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript" aria-hidden="true">#</a> TypeScript</h2><p>There are a lot of template languages in existence, and most of them have 2 things in common;</p><ol><li>It&#39;s a text-based format, with its own syntax for variables, control flow, inclusion of child templates, passing down context, etc.</li><li>There is no type checking between the data you pass when rendering the template (or including child templates), and how you use that data inside your template itself. It doesn&#39;t help you while writing your templates, and only warns you when running them with the wrong data.</li></ol><p>The purpose of adding TypeScript in the equation of templates, is to offer a solution to both problems described above. React has proven that writing your templates in a language familiar to everyone works just fine, and a vast amount of people even prefer it. And if your templates are just functions that receive props, and output the resulting template based on the passed data, you have support of typing within your template, and when passing data from the outside.</p><p>What&#39;s used inside the template functions is less important, and could even be as simple as string concatenation. Whatever solution is chosen, keep in mind that the only purpose is to render out an HTML string to the DOM. There is no interactivity or event binding in place. The purpose is to simulate HTML that is rendered on the server, which is also just plain text.</p><p>The bare-bones version of any template would look like this:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MyTemplateProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  products<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>MyProductTemplateProps<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">myTemplate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products <span class="token punctuation">}</span><span class="token operator">:</span> MyTemplateProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return ...</span>
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="mhtml" tabindex="-1"><a class="header-anchor" href="#mhtml" aria-hidden="true">#</a> mhtml</h2>`,13),d=n("Currently, muban exposes it's own template language (mhtml), comprised of "),k={href:"https://github.com/developit/htm",target:"_blank",rel:"noopener noreferrer"},m=n("htm"),b=n(" and "),h={href:"https://github.com/developit/vhtml",target:"_blank",rel:"noopener noreferrer"},g=n("vhtml"),v=n(" with some custom modifications and utils. It makes use of tagged template strings, is very light-weight, directly returns strings as template results."),f=e(`<h3 id="guide-for-composing-2-simple-templates" tabindex="-1"><a class="header-anchor" href="#guide-for-composing-2-simple-templates" aria-hidden="true">#</a> Guide for composing 2 simple templates</h3><p>A typical template would look like this:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@muban/template&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&#39;clsx&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">AccordionSlideProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  heading<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  expanded<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">,</span> ref<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div
    data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>AccordionSlide<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    data-ref=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ref<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    data-expanded=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>expanded<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &gt;
    &lt;div data-ref=&quot;slide-wrapper&quot; class=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span> expanded<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>expanded <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
      &lt;h4 data-ref=&quot;slide-heading&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
      &lt;p data-ref=&quot;slide-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AccordionProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  slides<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>AccordionSlideProps<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  activeIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordion</span><span class="token punctuation">(</span><span class="token punctuation">{</span> slides<span class="token punctuation">,</span> activeIndex <span class="token punctuation">}</span><span class="token operator">:</span> AccordionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Accordion<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>slides<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>slide<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>slide<span class="token punctuation">,</span> expanded<span class="token operator">:</span> index <span class="token operator">===</span> activeIndex <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;accordion-slide&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>Let&#39;s go step by step and see how we would write a template.</p><h4 id="_1-starting-with-the-props-and-template-function" tabindex="-1"><a class="header-anchor" href="#_1-starting-with-the-props-and-template-function" aria-hidden="true">#</a> 1. Starting with the props and template function</h4><p>If we know what our template should render, we can already define the template function and its props, so we can start rendering it to see how it looks.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@muban/template&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">AccordionSlideProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  heading<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  expanded<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>A template should return a <code>string</code>. Using the <code>html</code> tagged template string will do exactly that.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">\xA0</div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-add-the-template-html-with-some-data-filled-in" tabindex="-1"><a class="header-anchor" href="#_2-add-the-template-html-with-some-data-filled-in" aria-hidden="true">#</a> 2. Add the template HTML with some data filled in</h4><p>Next we can just create our HTML, and start adding</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;
    &lt;div&gt;
      &lt;h4&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
      &lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Notice that we&#39;re just using <code>\${}</code> placeholders to render our variables, just like we normally do in your template strings.</p><h4 id="_3-add-the-data-component-attribute" tabindex="-1"><a class="header-anchor" href="#_3-add-the-data-component-attribute" aria-hidden="true">#</a> 3. Add the data-component attribute</h4><p>If we know our template is going to be for a component, we should add the <code>data-component</code> attribute.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>AccordionSlide<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
    &lt;div&gt;
      &lt;h4&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
      &lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>This is just a string, but if we already have our TS component, we can just reference it from there, so we always know they are in sync.</p><h4 id="_4-add-other-data" tabindex="-1"><a class="header-anchor" href="#_4-add-other-data" aria-hidden="true">#</a> 4. Add other data</h4><p>We still have to manage how our <code>expanded</code> property should behave. Let&#39;s add it as a css class on the container div, and as a <code>data-</code> attribute on the component.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@muban/template&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> classnames <span class="token keyword">from</span> <span class="token string">&#39;clsx&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div
    data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>AccordionSlide<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    data-expanded=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>expanded<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &gt;
    &lt;div class=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span> expanded<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>expanded <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
      &lt;h4&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
      &lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><div class="highlight-line">\xA0</div><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>By setting the <code>data-expanded</code> attribute, our TS component can pull it in as property to set it&#39;s initial state correctly.</p><p>For setting the <code>class</code> attribute we can use the <code>classnames</code> module; it applies any classes which value is truthy.</p><div class="custom-container warning"><p class="custom-container-title">Component state</p><p>If the component should update the visual representation after interaction, and from the server it can be rendered in either of those options, the rendered HTML should always make sure both the visual representation is correctly rendered, along with providing the state in a <code>data-</code> attribute.</p><p>The component should read that state through the props, and set up the same bindings to reflect that visual representation, so both are in sync.</p></div><h4 id="_5-define-your-refs" tabindex="-1"><a class="header-anchor" href="#_5-define-your-refs" aria-hidden="true">#</a> 5. Define your refs</h4><p>After that you should know what parts of your HTML your component is interested in updating through the bindings. Those elements should add a <code>data-ref</code> attribute with a semi-unique value, so your component can query those elements.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div
    data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>AccordionSlide<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    data-expanded=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>expanded<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &gt;
    &lt;div data-ref=&quot;slide-wrapper&quot; class=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span> expanded<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>expanded <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
      &lt;h4 data-ref=&quot;slide-heading&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
      &lt;p data-ref=&quot;slide-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The value of the <code>data-ref</code> should be unique within your component (tree). Some things to keep in mind about those refs:</p><ul><li>When using <code>refElement</code> to select refs, it uses <code>querySelector</code> to pick the first matching element.</li><li>When using <code>refCollection</code>, it uses <code>querySelectorAll</code> to select al matching refs it finds.</li><li>When using <code>refComponent</code> or <code>refComponents</code>, and passing the <code>ref</code> value, the same behaviour as above is applied. When not passing a <code>ref</code>, it uses the <code>data-component</code> attribute, and the same behaviour applies.</li></ul><div class="custom-container tip"><p class="custom-container-title">data-ref</p><p>Rather than selecting arbitrary css classnames that can change over time, or abuse js-foo classnames that are only used to query from JS, we use dedicated <code>data-ref</code> attributes to make the intent of use fully transparent.</p></div><h4 id="_6-define-your-own-component-s-ref" tabindex="-1"><a class="header-anchor" href="#_6-define-your-own-component-s-ref" aria-hidden="true">#</a> 6. Define your own component&#39;s ref</h4><p>When your component template is rendered inside other component templates, it might want to target this component as part of a collection or as a specific single element. To allow this, we must also accept a <code>ref</code> parameter in our template function, and render it in our root element.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> heading<span class="token punctuation">,</span> content<span class="token punctuation">,</span> expanded <span class="token punctuation">}</span><span class="token operator">:</span> AccordionSlideProps<span class="token punctuation">,</span> ref<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div
   data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>AccordionSlide<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
   data-ref=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ref<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
   data-expanded=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>expanded<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
 &gt;
   &lt;div data-ref=&quot;slide-wrapper&quot; class=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">classnames</span><span class="token punctuation">(</span><span class="token punctuation">{</span> expanded<span class="token operator">:</span> <span class="token operator">!</span><span class="token operator">!</span>expanded <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
     &lt;h4 data-ref=&quot;slide-heading&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>heading<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h4&gt;
     &lt;p data-ref=&quot;slide-content&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>content<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
   &lt;/div&gt;
 &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_7-doing-the-same-for-our-parent-component" tabindex="-1"><a class="header-anchor" href="#_7-doing-the-same-for-our-parent-component" aria-hidden="true">#</a> 7. Doing the same for our parent component</h4><p>First we specify our template props, and rendering the outer element, filling the <code>data-component</code> attribute with the component&#39;s name.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AccordionProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  slides<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>AccordionSlideProps<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  activeIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordion</span><span class="token punctuation">(</span><span class="token punctuation">{</span> slides<span class="token punctuation">,</span> activeIndex <span class="token punctuation">}</span><span class="token operator">:</span> AccordionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Accordion<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Note that we&#39;re composing our prop types by referencing <code>AccordionSlideProps</code>. We can do this because we&#39;re actually going to render our child template here, and passing that data along.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accordion</span><span class="token punctuation">(</span><span class="token punctuation">{</span> slides<span class="token punctuation">,</span> activeIndex <span class="token punctuation">}</span><span class="token operator">:</span> AccordionProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div data-component=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Accordion<span class="token punctuation">.</span>displayName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>slides<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>slide<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">accordionSlide</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>slide<span class="token punctuation">,</span> expanded<span class="token operator">:</span> index <span class="token operator">===</span> activeIndex <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;accordion-slide&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>We&#39;re just using the <code>\${}</code> tokens to inline our child templates. We map over our slides Array, invoke our child template function, and pass our data for each slide as props. Additionally, we pass the <code>ref</code> we want as the 2nd argument.</p><h3 id="rendering-raw-html" tabindex="-1"><a class="header-anchor" href="#rendering-raw-html" aria-hidden="true">#</a> Rendering raw HTML</h3><h4 id="unsafehtml" tabindex="-1"><a class="header-anchor" href="#unsafehtml" aria-hidden="true">#</a> unsafeHTML</h4><p>To render raw HTML, we can use the <code>unsafeHTML</code> util. By default, all our variables will be considered unsafe and thus escaped. If your data contains HTML that needs to be rendered in your template, you can use this helper.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> unsafeHTML <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@muban/muban&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token string">&#39;Hello &lt;strong&gt;World&lt;/strong&gt;!&#39;</span><span class="token punctuation">;</span>

html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">unsafeHTML</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="dangerouslysetinnerhtml" tabindex="-1"><a class="header-anchor" href="#dangerouslysetinnerhtml" aria-hidden="true">#</a> dangerouslySetInnerHTML</h4><p>Because <code>htm</code>/<code>vhtml</code> are built to support JSX use cases, another way to render &quot;innerHTML&quot; is using the <code>dangerouslySetInnerHTML</code> attribute on any HTML element. We use that internally in some other helpers as well, for example:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;script
        type=&quot;application/json&quot;
        dangerouslySetInnerHTML=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token punctuation">{</span>
          __html<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      &gt;&lt;/script&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="html-entities" tabindex="-1"><a class="header-anchor" href="#html-entities" aria-hidden="true">#</a> Html entities</h4><div class="custom-container warning"><p class="custom-container-title">html entities</p><p>Because the way the <code>htm</code> parser works, any &quot;text content&quot; that contains HTML characters might confuse it. Always use <code>&amp;lt;</code> and similar escaped entities if you need to render them.</p><p>Unfortunately there aren&#39;t any errors shown, the rendered HTML will just be out of sync.</p></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// don&#39;t - this will break in your browser</span>
html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;p&gt;It&#39;s &lt; 9000&lt;/p&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>

<span class="token comment">// do this</span>
html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;p&gt;It&#39;s &amp;lt; 9000&lt;/p&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="false-values-on-data-attributes" tabindex="-1"><a class="header-anchor" href="#false-values-on-data-attributes" aria-hidden="true">#</a> False values on data attributes</h3><p>HTML <code>data-</code> attributes with <code>false</code> values will be stringified in the resulting HTML</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>html\`<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>\${false}</span><span class="token punctuation">&gt;</span></span>foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\`
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Will become</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>foo<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This only will happen for data attributes (attributes that start with <code>data-</code>)</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div data-test=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token boolean">false</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> another-attribute=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token boolean">false</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;foo&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Will become</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div data<span class="token operator">-</span>test<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>foo<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Non data attributes with a <code>false</code> value will be ignored in the resulting HTML</p>`,58);function y(w,x){const a=p("ExternalLinkIcon");return o(),i(l,null,[u,s("p",null,[d,s("a",k,[m,t(a)]),b,s("a",h,[g,t(a)]),v]),f],64)}var S=c(r,[["render",y]]);export{S as default};
